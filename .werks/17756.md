[//]: # (werk v2)
# Improved SQLite housekeeping for event console history

key        | value
---------- | ---
date       | 2025-10-23T06:37:53+00:00
version    | 2.4.0p15
class      | fix
edition    | cre
component  | ec
level      | 1
compatible | yes

Starting with Checkmk 2.4, the event console history is persisted in a SQLite
database. Several improvements regarding the housekeeping of this DB have been
made to handle huge histories better:

- The temporary directory for SQLite is now the `tmp/` directory within the
  site, not some global directory like `/var/tmp/`. Running out of space will
  now typically only affect the site, not the whole system. If you want to
  change this for some reason, you can tweak `SQLITE_TMPDIR` in the site user's
  `.profile`.
- The SQLite DB will not reorganize itself (`VACUUM`) anymore if there is not
  sufficient space left on the filesystem of the temporary directory.
- To aid debugging, the SQLite temporary directory is logged per default on
  startup and each start/end of a `VACUUM` run. If you want more info why a
  `VACUUM` ran or did not run and see some more timing-related data, you can set
  the "Event database" log level of the event console to `verbose` or even
  `debug`.

