[//]: # (werk v2)
# Netapp Ontap Fans: handle different node netapp versions

key        | value
---------- | ---
date       | 2025-08-05T15:18:00+00:00
version    | 2.4.0p10
class      | fix
edition    | cre
component  | checks
level      | 1
compatible | yes

The Netapp ONTAP special agent crashed with

    netapp_ontap.error.NetAppRestError: Caused by HTTPError('400 Client Error: Bad Request for url: https://.../api/storage/shelves?fields=id%2Cfans.id%2Cfans.state%2Cfans.installed'): The value "fans.installed" is invalid for field "fields" (<field,...>)


This occurred because the `fans.installed` field was not available in some versions of ONTAP.
The code now checks the ONTAP version and adjusts the fields requested accordingly.
