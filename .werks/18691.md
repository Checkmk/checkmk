[//]: # (werk v2)
# netapp_ontap_aggr: handle missing aggregates gracefully

key        | value
---------- | ---
date       | 2025-10-01T09:40:18+00:00
version    | 2.5.0b1
class      | fix
edition    | cre
component  | checks
level      | 1
compatible | yes

The NetApp ONTAP special agent could crash with the following error:

    File "/omd/sites/main/lib/python3.12/site-packages/netapp_ontap/utils.py", line 78, in on_api_fail
        raise NetAppRestError(cause=erro) from None
    netapp_ontap.error.NetAppRestError: Caused by HTTPError('404 Client Error: Not Found for url: https://host:443/api/storage/aggregates/aggr_id?fields=name%2Cspace.block_storage.available%2Cspace.block_storage.size'): entry doesn't exist(!!)

This occurs when the aggregate cannot be queried, for example, if it is connected to a defective machine.

From this werk, the agent will skip that aggregate and continue,
and the respective service will enter a WARN state, indicating a missing item.
