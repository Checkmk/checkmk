[//]: # (werk v2)
# Introduced Podman Monitoring

key        | value
---------- | ---
date       | 2025-10-20T13:15:01+00:00
version    | 2.5.0b1
class      | feature
edition    | cre
component  | checks
level      | 1
compatible | yes

This werk introduces monitoring support for Podman containers and pods. The new monitoring includes both host-level and per-container services.

### Host-level Services
The following services are created on the Podman host:<br>
- **Podman containers**: Monitors the total number of containers in different states (running, stopped, dead, etc.) with configurable thresholds<br>
- **Podman pods**: Monitors the total number of pods in different states (running, created, stopped, dead, exited) with configurable thresholds<br>
- **Podman disk usage**: Monitors disk space usage for containers, images, and volumes with size-based thresholds<br>
- **Podman status**: Reports any errors encountered when querying the Podman API

### Per-container Services (Piggyback)
Each container is monitored as a separate piggyback host with the following services:<br>
- **Status**: Monitors the operational state of the container (running, stopped, etc.) with configurable state mappings<br>
- **Health**: Monitors container health check status when health checks are configured<br>
- **Restarts**: Tracks container restart count with rate-based alerting<br>
- **CPU utilization**: Monitors container CPU usage percentage<br>
- **Memory**: Monitors container memory usage with percentage and absolute thresholds<br>
- **Container IO**: Monitors disk I/O operations (read/write operations per second)<br>
- **Uptime**: Tracks how long the container has been running

### Inventory Information
The monitoring also provides inventory data for:<br>
- **Podman engine**: Version, API version, rootless mode, registries, and hostname<br>
- **Per-container details**: Hostname, labels, network configuration (IP, gateway, MAC address)<br>

### Configuration
Podman monitoring is configured via the "Podman Monitoring" agent rule.<br>
The monitoring supports:<br>
- Automatic socket detection for both root and user Podman instances<br>
- Manual socket path specification for custom configurations

### Prerequisites
- Python 3.9 or newer must be available on the monitored host
- Python package *requests_unixsocket* must be installed (required for communicating with Podmanâ€™s UNIX socket)