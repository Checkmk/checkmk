[//]: # (werk v3)
# OTel: Correctly discover already running otel-collector process

key        | value
---------- | ---
date       | 2026-01-22T14:43:07+00:00
version    | 2.5.0b1
class      | fix
edition    | ultimate
component  | omd
level      | 1
compatible | yes

The otel-collector init script did not correctly detect an already running otel-collector process when running `omd start` or `omd start otel-collector` multiple times. As a result, it attempted to start a new process and overwrote the file tracking the currect process id (pid).

The newly started otel-collector process then failed due to the ports already being used by the running otel-collector instance. This caused the original process to become orphaned, and `omd status` incorrectly showed the otel-collector as stopped.

To work around this issue, users had to manually kill the running otel-collector process before restarting it with `omd start otel-collector`.

This Werk improves the init script to correctly detect the running otel-collector process, preventing the start of duplicate processes and avoiding overwriting the process id tracking file.
After updating, users can safely run `omd start` or `omd start otel-collector` multiple times without causing failures or orphaned processes, enhancing reliability and ease of use.

If the otel-collector is active and used in checkmk users should check if their service is running correct with `omd status`. If the service is `running` no further action is required.
If the service is `stopped` but data is still being received, switch to the site user via `sudo omd su <SITE>` and run `ps ux | grep otelcol`.
Note down the process id and run `kill -9 <process id>`. Run `ps ux | grep otelcol` and make sure the process is stopped.
Restart the process with `omd start otel-collector` and wait till it is started correctly.


