<!DOCTYPE html>
<table width="100%"
       style="margin: 0 auto;
              max-width: 600px;
              border: 1px solid #e5e5e5;
              border-collapse: separate;
              border-top: 8px solid {% if service_notification %} {{ state_mapping.get(data.SERVICESTATE, 'background-color: #888888;
               color: #ffffff;
               ').split('background-color: ')[1].split(';
              ')[0] }} {% else %} {{ state_mapping.get(data.HOSTSTATE, 'background-color: #888888;
               color: #ffffff;
               ').split('background-color: ')[1].split(';
              ')[0] }} {% endif %}">
    <tr>
        <td style="margin:0; padding: 10px 0 5px 0;">
            <table width="100%" style="border-collapse: collapse;border-spacing: 0;">
                <tr>
                    <td width="80"
                        height="33"
                        style="font-size:14px;
                               font-weight:600;
                               padding:8px;
                               border-bottom: 1px solid #e5e5e5;
                               color: #2c3844">Event:</td>
                    <td height="33"
                        style="font-size:14px;
                               font-weight:600;
                               border-bottom: 1px solid #e5e5e5;
                               color: #2c3844">
                        <table style="border-collapse: collapse;">
                            <tr>
                                <td style="line-height: 45px; padding: 0;">
                                    <div style="{{ macros.event_marker_style() }} {% if service_notification %} {{ state_mapping[(data.PREVIOUSSERVICEHARDSTATE|default("UNKNOWN") )] }} {% else %} {{ state_mapping[(data.PREVIOUSHOSTHARDSTATE|default("UNKNOWN") )] }} {% endif %} display: inline-block">
                                        {% if service_notification %}
                                            {{ (data.PREVIOUSSERVICEHARDSTATE|default("UNKNOWN") )[:4] }}
                                        {% else %}
                                            {{ (data.PREVIOUSHOSTHARDSHORTSTATE|default("UNKNOWN") )[:4] }}
                                        {% endif %}
                                    </div>
                                </td>
                                <td style="padding: 0 5px;
                                           vertical-align: middle;
                                           text-align: center;
                                           line-height: 1;
                                           height: 33px">
                                    <div style="font-size: 14px;
                                                font-weight: 600;
                                                line-height: 1.5;
                                                display: inline-block">&#8211;&#8250;</div>
                                </td>
                                <td style="line-height: 45px; padding: 0;">
                                    <div style="{{ macros.event_marker_style() }} {% if service_notification %} {{ state_mapping[data.SERVICESTATE] }} {% else %} {{ state_mapping[data.HOSTSTATE] }} {% endif %} display: inline-block">
                                        {% if service_notification %}
                                            {{ data.SERVICESTATE[:4] }}
                                        {% else %}
                                            {{ data.HOSTSTATE[:4] }}
                                        {% endif %}
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                {% if service_notification %}
                    <tr style="border-bottom: 1px solid #e5e5e5;">
                        <td width="80"
                            style="font-size:14px;
                                   font-weight:600;
                                   padding:8px;
                                   border-bottom: 1px solid #e5e5e5;
                                   height:33px;
                                   color: #2c3844">Service:</td>
                        <td style="font-size:14px;
                                   border-bottom: 1px solid #e5e5e5;
                                   height:33px;
                                   color: #2c3844">{{ data.LINKEDSERVICEDESC | safe }}</td>
                    </tr>
                {% endif %}
                <tr>
                    <td {{ macros.td_first_child(width='80px', padding='8px') }}>
                        Host:
                    </td>
                    <td {{ macros.td_last_child() }}>
                        {{ data.HOSTNAME_AND_ALIAS_HTML | safe }}
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td style="margin:0 auto;">
            {% if href %}{{ macros.view_issue_button(href) }}{% endif %}
        </td>
    </tr>
</table>
