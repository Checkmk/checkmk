LIBGSF := libgsf

LIBGSF_BUILD := $(BUILD_HELPER_DIR)/$(LIBGSF)-build
LIBGSF_INTERMEDIATE_INSTALL := $(BUILD_HELPER_DIR)/$(LIBGSF)-install-intermediate
LIBGSF_INSTALL := $(BUILD_HELPER_DIR)/$(LIBGSF)-install

LIBGSF_INSTALL_DIR := $(INTERMEDIATE_INSTALL_BASE)/$(LIBGSF)
LIBGSF_BUILD_DIR := $(PACKAGE_BUILD_DIR)/$(LIBGSF)

.PHONY: $(LIBGSF_BUILD)
$(LIBGSF_BUILD):
ifneq ($(filter sles15%,$(DISTRO_CODE)),)
	$(BAZEL_CMD) build @$(LIBGSF)//:$(LIBGSF)
endif

.PHONY: $(LIBGSF_INTERMEDIATE_INSTALL)
$(LIBGSF_INTERMEDIATE_INSTALL): $(LIBGSF_BUILD)
ifneq ($(filter sles15%,$(DISTRO_CODE)),)
	$(MKDIR) $(LIBGSF_INSTALL_DIR)
	$(RSYNC) --chmod=u+w $(BAZEL_BIN_EXT)/$(LIBGSF)/$(LIBGSF)/ $(LIBGSF_INSTALL_DIR)/
endif

.PHONY: $(LIBGSF_INSTALL)
$(LIBGSF_INSTALL): $(LIBGSF_INTERMEDIATE_INSTALL)
ifneq ($(filter sles15%,$(DISTRO_CODE)),)
	$(RSYNC) $(LIBGSF_INSTALL_DIR)/ $(DESTDIR)$(OMD_ROOT)/
endif
