# -*- encoding: utf-8
# yapf: disable


checkname = 'mssql_backup'


freeze_time = '2016-07-12T12:00:00'


info = [['MSSQL_SQL0x4', 'master', '2016-07-08 20:20:27', 'D'],
        ['MSSQL_SQL0x4', 'model', '2016-07-08 20:20:28', 'D'],
        ['MSSQL_SQL0x4', 'model', '2016-07-12 09:09:42', 'L'],
        ['MSSQL_SQL0x4', 'model', '2016-07-11 20:20:07', 'I'],
        ['MSSQL_SQL0x4', 'msdb', '2016-07-08', '20:20:43', 'D', None],
        ['MSSQL_SQL0x4', 'msdb', '-', '-', '-', 'no backup found'],
        ['MSSQL_SQL0x4', 'tempdb', '-', '-', '-', 'no backup found'],
        ['MSSQL_SQL0x4', 'foo'],
        ['MSSQL_SQL0x4', 'bar', '12345678', None, None, None],
        ['MSSQL_Parrot', 'Polly', '-', '-', '-', 'ERROR: Polly has no crackers']]


discovery = {'': [('MSSQL_Parrot Polly', {}),
                  ('MSSQL_SQL0x4 bar', {}),
                  ('MSSQL_SQL0x4 master', {}),
                  ('MSSQL_SQL0x4 model', {}),
                  ('MSSQL_SQL0x4 msdb', {}),
                  ('MSSQL_SQL0x4 tempdb', {})],
             'per_type': []}


checks = {'': [('MSSQL_Parrot Polly',
                {'database': (None, None),
                 'database_diff': (None, None),
                 'file_diff': (None, None),
                 'file_or_filegroup': (None, None),
                 'log': (None, None),
                 'partial': (None, None),
                 'partial_diff': (None, None),
                 'unspecific': (None, None)},
                [(2, 'Polly has no crackers', [])]),
               ('MSSQL_SQL0x4 bar',
                {'database': (None, None),
                 'database_diff': (None, None),
                 'file_diff': (None, None),
                 'file_or_filegroup': (None, None),
                 'log': (None, None),
                 'partial': (None, None),
                 'partial_diff': (None, None),
                 'unspecific': (None, None)},
                [(0,
                  '[database] Last backup was at 1970-05-23 22:21:18 (46 y ago)',
                  [('seconds', 1455979122.0, None, None, None, None)])]),
               ('MSSQL_SQL0x4 master',
                {'database': (None, None),
                 'database_diff': (None, None),
                 'file_diff': (None, None),
                 'file_or_filegroup': (None, None),
                 'log': (None, None),
                 'partial': (None, None),
                 'partial_diff': (None, None),
                 'unspecific': (None, None)},
                [(0,
                  '[database] Last backup was at 2016-07-08 20:20:27 (3.7 d ago)',
                  [('backup_age_database', 322773.0, None, None, None, None)])]),
               ('MSSQL_SQL0x4 model',
                {'database': (None, None),
                 'database_diff': (None, None),
                 'file_diff': (None, None),
                 'file_or_filegroup': (None, None),
                 'log': (None, None),
                 'partial': (None, None),
                 'partial_diff': (None, None),
                 'unspecific': (None, None)},
                [(0,
                  '[database] Last backup was at 2016-07-08 20:20:28 (3.7 d ago)',
                  [('backup_age_database', 322772.0, None, None, None, None)]),
                 (0,
                  '[log] Last backup was at 2016-07-12 09:09:42 (290 m ago)',
                  [('backup_age_log', 17418.0, None, None, None, None)]),
                 (0,
                  '[database diff] Last backup was at 2016-07-11 20:20:07 (17 h ago)',
                  [('backup_age_database_diff', 63593.0, None, None, None, None)])]),
               ('MSSQL_SQL0x4 msdb',
                {'database': (None, None),
                 'database_diff': (None, None),
                 'file_diff': (None, None),
                 'file_or_filegroup': (None, None),
                 'log': (None, None),
                 'partial': (None, None),
                 'partial_diff': (None, None),
                 'unspecific': (None, None)},
                [(0,
                  '[database] Last backup was at 2016-07-08 20:20:43 (3.7 d ago)',
                  [('backup_age_database', 322757.0, None, None, None, None)]),
                 (1, 'No backup found', [])]),
               ('MSSQL_SQL0x4 tempdb',
                {'database': (None, None),
                 'database_diff': (None, None),
                 'file_diff': (None, None),
                 'file_or_filegroup': (None, None),
                 'log': (None, None),
                 'partial': (None, None),
                 'partial_diff': (None, None),
                 'unspecific': (None, None)},
                [(0, 'No backup found', [])])]}